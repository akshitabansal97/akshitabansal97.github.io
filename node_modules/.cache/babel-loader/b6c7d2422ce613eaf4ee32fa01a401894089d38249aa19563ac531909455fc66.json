{"ast":null,"code":"import{useCallback,useEffect,useRef,useState}from\"react\";import'./VideoFlipper.css';import{aspectRatios}from\"./constant\";import RecordedPreview from\"./RecordedPreview\";import Header from\"./header\";import VideoFlipperContext from\"./context\";import Preview from\"./preview\";import Controls from\"./controls\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VideoFlipper=()=>{const[activeTab,setActiveTab]=useState('editor');const[isPlaying,setIsPlaying]=useState(false);const[playbackRate,setPlaybackRate]=useState(1);const[volume,setVolume]=useState(1);const[currentTime,setCurrentTime]=useState(0);const[aspectRatio,setAspectRatio]=useState(\"9:18\");const[showCropper,setShowCropper]=useState(false);const[recordedData,setRecordedData]=useState([]);const[duration,setDuration]=useState(0);const[cropperSize,setCropperSize]=useState({width:0,height:0});const cropperRef=useRef(null);const videoRef=useRef(null);const previewCanvasRef=useRef(null);console.log('recordedData',recordedData);const[position,setPosition]=useState({x:0,y:0});const[dragging,setDragging]=useState(false);const[offset,setOffset]=useState({x:0,y:0});useEffect(()=>{const video=videoRef.current;if(video){video.addEventListener('loadedmetadata',handleLoadedMetadata);return()=>{video.removeEventListener('loadedmetadata',handleLoadedMetadata);};}},[]);const handleLoadedMetadata=()=>{setDuration(videoRef.current.duration);};useEffect(()=>{if(videoRef.current){videoRef.current.playbackRate=playbackRate;videoRef.current.volume=volume;}},[playbackRate,videoRef,volume]);useEffect(()=>{const recordData=(// { x = position.x, y = position.y, width = cropperSize.width, height = cropperSize.height, newVolume = volume, newPlaybackRate = playbackRate }\n)=>{const prevData=[...recordedData];const lastEl=prevData.at(-1);console.log('lastEl',lastEl);const{width,height}=getCropperSize(aspectRatio);console.log('width, height',width,height);const newData={timeStamp:currentTime,coordinates:[position.x,position.y,width,height],volume,playbackRate};if(lastEl&&lastEl.timeStamp===currentTime){prevData.pop();}setRecordedData([...prevData,newData]);};if(videoRef.current){recordData();};},[volume,playbackRate,aspectRatio,position.x,position.y,cropperSize.width,cropperSize.height]);useEffect(()=>{const updatePreview=()=>{if(showCropper&&videoRef.current&&cropperRef.current&&previewCanvasRef.current){const video=videoRef.current;const cropper=cropperRef.current;const canvas=previewCanvasRef.current;const ctx=canvas.getContext('2d');const cropperRect=cropper.getBoundingClientRect();const videoRect=video.getBoundingClientRect();const scaleX=video.videoWidth/videoRect.width;const scaleY=video.videoHeight/videoRect.height;const sourceX=(cropperRect.left-videoRect.left)*scaleX;const sourceY=(cropperRect.top-videoRect.top)*scaleY;const sourceWidth=cropperRect.width*scaleX;const sourceHeight=cropperRect.height*scaleY;canvas.width=cropperRect.width;canvas.height=cropperRect.height;ctx.drawImage(video,sourceX,sourceY,sourceWidth,sourceHeight,0,0,canvas.width,canvas.height);}};const animationId=requestAnimationFrame(function animate(){updatePreview();requestAnimationFrame(animate);});return()=>cancelAnimationFrame(animationId);},[aspectRatio,showCropper]);const handleMouseUp=()=>{// if (dragging) recordData({ x: position.x, y: position.y });\nsetDragging(false);};const handleMouseDown=e=>{setDragging(true);// Get initial mouse position and box position\nsetOffset({x:e.clientX-position.x,y:e.clientY-position.y});};const handleMouseMove=e=>{if(dragging){const container=videoRef.current.getBoundingClientRect();const box=cropperRef.current.getBoundingClientRect();let newX=e.clientX-offset.x;let newY=e.clientY-offset.y;// Keep the box within container bounds\nif(newX<0)newX=0;if(newY<0)newY=0;if(newX+box.width>container.width)newX=container.width-box.width;if(newY+box.height>container.height)newY=container.height-box.height;setPosition({x:newX,y:newY});}};const handleTimeUpdate=()=>{setCurrentTime(videoRef.current.currentTime);};const getCropperSize=ratio=>{const videoHeight=videoRef.current.offsetHeight;console.log('videoRef.current',videoRef.current,videoRef.current.offsetHeight);const newWidth=videoHeight*aspectRatios[ratio];return{width:newWidth,height:videoHeight};};const handleAspectRatioChange=newRatio=>{setAspectRatio(newRatio);// Update cropper size based on new aspect ratio\nconst{width,height}=getCropperSize(newRatio);setCropperSize({width,height});};const handleDownloadJSON=()=>{const dataStr=\"data:text/json;charset=utf-8,\"+encodeURIComponent(JSON.stringify(recordedData));const downloadAnchorNode=document.createElement('a');downloadAnchorNode.setAttribute(\"href\",dataStr);downloadAnchorNode.setAttribute(\"download\",\"recorded_data.json\");document.body.appendChild(downloadAnchorNode);downloadAnchorNode.click();downloadAnchorNode.remove();};const handleTabClick=tab=>{setActiveTab(tab);};const getVideoWidth=useCallback(()=>{let height=460;if(videoRef.current){height=videoRef.current.getBoundingClientRect().height;}return`${height*aspectRatios[aspectRatio]}px`;},[aspectRatio]);const editorUi=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"editor-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editor\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video-container\",onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,children:[/*#__PURE__*/_jsx(\"video\",{className:\"video\",ref:videoRef,src:\"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\",onTimeUpdate:handleTimeUpdate}),showCropper&&/*#__PURE__*/_jsxs(\"div\",{id:\"draggable\",ref:cropperRef,className:\"cropper\",style:{top:`${position.y}px`,left:`${position.x}px`,width:getVideoWidth(),height:\"100%\",aspectRatio:aspectRatio},onMouseDown:handleMouseDown,children:[/*#__PURE__*/_jsx(\"div\",{class:\"grid-item\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-item\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-item\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-item\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-item\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-item\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-item\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-item\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-item\"})]})]}),/*#__PURE__*/_jsx(Controls,{})]}),/*#__PURE__*/_jsx(Preview,{})]});const startCropper=()=>{setShowCropper(true);const{width,height}=getCropperSize(aspectRatio);console.log(width,height);};const removeCropper=()=>{setShowCropper(false);};return/*#__PURE__*/_jsx(VideoFlipperContext.Provider,{value:{activeTab,handleTabClick,videoRef,aspectRatio,previewCanvasRef,showCropper,position,handleTimeUpdate,duration,isPlaying,currentTime,setCurrentTime,playbackRate,setPlaybackRate,volume,setVolume,handleAspectRatioChange,handleDownloadJSON,setIsPlaying,handleMouseUp,handleMouseDown,handleMouseMove},children:/*#__PURE__*/_jsxs(\"div\",{className:\"cropper-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cropper-top\",children:[/*#__PURE__*/_jsx(Header,{activeTab:activeTab,onTabClick:handleTabClick}),activeTab==='editor'?editorUi():/*#__PURE__*/_jsx(RecordedPreview,{recordedData:recordedData,videoSrc:\"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\"})]}),activeTab==='editor'&&/*#__PURE__*/_jsxs(\"div\",{className:\"cropper-bottom\",children:[/*#__PURE__*/_jsx(\"div\",{className:`cropper-bottom-btn ${showCropper&&'cropper-bottom-btn-disabled'}`,type:\"button\",onClick:startCropper,children:\"Start Cropper\"}),/*#__PURE__*/_jsx(\"div\",{className:`cropper-bottom-btn ${!showCropper&&'cropper-bottom-btn-disabled'}`,type:\"button\",onClick:removeCropper,children:\"Remove Cropper\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cropper-bottom-btn\",type:\"button\",onClick:handleDownloadJSON,children:\"Generate Preview\"})]})]})});};export default VideoFlipper;","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","aspectRatios","RecordedPreview","Header","VideoFlipperContext","Preview","Controls","jsx","_jsx","jsxs","_jsxs","VideoFlipper","activeTab","setActiveTab","isPlaying","setIsPlaying","playbackRate","setPlaybackRate","volume","setVolume","currentTime","setCurrentTime","aspectRatio","setAspectRatio","showCropper","setShowCropper","recordedData","setRecordedData","duration","setDuration","cropperSize","setCropperSize","width","height","cropperRef","videoRef","previewCanvasRef","console","log","position","setPosition","x","y","dragging","setDragging","offset","setOffset","video","current","addEventListener","handleLoadedMetadata","removeEventListener","recordData","prevData","lastEl","at","getCropperSize","newData","timeStamp","coordinates","pop","updatePreview","cropper","canvas","ctx","getContext","cropperRect","getBoundingClientRect","videoRect","scaleX","videoWidth","scaleY","videoHeight","sourceX","left","sourceY","top","sourceWidth","sourceHeight","drawImage","animationId","requestAnimationFrame","animate","cancelAnimationFrame","handleMouseUp","handleMouseDown","e","clientX","clientY","handleMouseMove","container","box","newX","newY","handleTimeUpdate","ratio","offsetHeight","newWidth","handleAspectRatioChange","newRatio","handleDownloadJSON","dataStr","encodeURIComponent","JSON","stringify","downloadAnchorNode","document","createElement","setAttribute","body","appendChild","click","remove","handleTabClick","tab","getVideoWidth","editorUi","className","children","onMouseMove","onMouseUp","onMouseLeave","ref","src","onTimeUpdate","id","style","onMouseDown","class","startCropper","removeCropper","Provider","value","onTabClick","videoSrc","type","onClick"],"sources":["/Users/akshita/Downloads/akshitabansal97.github.io/src/VideoFlipper.jsx"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from \"react\";\n\nimport './VideoFlipper.css';\nimport { aspectRatios } from \"./constant\";\nimport RecordedPreview from \"./RecordedPreview\";\nimport Header from \"./header\";\nimport VideoFlipperContext from \"./context\";\nimport Preview from \"./preview\";\nimport Controls from \"./controls\";\n\nconst VideoFlipper = () => {\n  const [activeTab, setActiveTab] = useState('editor');\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [playbackRate, setPlaybackRate] = useState(1);\n  const [volume, setVolume] = useState(1);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [aspectRatio, setAspectRatio] = useState(\"9:18\");\n  const [showCropper, setShowCropper] = useState(false);\n  const [recordedData, setRecordedData] = useState([]);\n  const [duration, setDuration] = useState(0);\n  const [cropperSize, setCropperSize] = useState({ width: 0, height: 0 });\n  const cropperRef = useRef(null);\n  const videoRef = useRef(null);\n  const previewCanvasRef = useRef(null);\n\n  console.log('recordedData', recordedData);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [dragging, setDragging] = useState(false);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    const video = videoRef.current;\n    if (video) {\n      video.addEventListener('loadedmetadata', handleLoadedMetadata);\n\n      return () => {\n        video.removeEventListener('loadedmetadata', handleLoadedMetadata);\n      };\n    }\n  }, []);\n\n  const handleLoadedMetadata = () => {\n    setDuration(videoRef.current.duration);\n  };\n\n  useEffect(() => {\n    if (videoRef.current) {\n      videoRef.current.playbackRate = playbackRate;\n      videoRef.current.volume = volume;\n    }\n  }, [playbackRate, videoRef, volume]);\n\n  useEffect(() => {\n    const recordData = (\n      // { x = position.x, y = position.y, width = cropperSize.width, height = cropperSize.height, newVolume = volume, newPlaybackRate = playbackRate }\n    ) => {\n      const prevData = [...recordedData];\n      const lastEl = prevData.at(-1);\n\n      console.log('lastEl', lastEl);\n      const {width, height} = getCropperSize(aspectRatio);\n      console.log('width, height', width, height)\n      const newData = {\n        timeStamp: currentTime,\n        coordinates: [\n          position.x,\n          position.y,\n          width,\n          height\n        ],\n        volume,\n        playbackRate\n      };\n\n      if (lastEl && lastEl.timeStamp === currentTime) {\n        prevData.pop();\n      }\n\n      setRecordedData([...prevData, newData]);\n    };\n    \n    if (videoRef.current) {\n      recordData();\n    };\n  }, [volume, playbackRate, aspectRatio, position.x, position.y, cropperSize.width, cropperSize.height]);\n\n  useEffect(() => {\n    const updatePreview = () => {\n\n      if (showCropper && videoRef.current && cropperRef.current && previewCanvasRef.current) {\n        const video = videoRef.current;\n        const cropper = cropperRef.current;\n        const canvas = previewCanvasRef.current;\n        const ctx = canvas.getContext('2d');\n\n        const cropperRect = cropper.getBoundingClientRect();\n        const videoRect = video.getBoundingClientRect();\n\n        const scaleX = video.videoWidth / videoRect.width;\n        const scaleY = video.videoHeight / videoRect.height;\n\n        const sourceX = (cropperRect.left - videoRect.left) * scaleX;\n        const sourceY = (cropperRect.top - videoRect.top) * scaleY;\n        const sourceWidth = cropperRect.width * scaleX;\n        const sourceHeight = cropperRect.height * scaleY;\n\n        canvas.width = cropperRect.width;\n        canvas.height = cropperRect.height;\n\n        ctx.drawImage(\n          video,\n          sourceX, sourceY, sourceWidth, sourceHeight,\n          0, 0, canvas.width, canvas.height\n        );\n      }\n    };\n\n    const animationId = requestAnimationFrame(function animate() {\n      updatePreview();\n      requestAnimationFrame(animate);\n    });\n\n    return () => cancelAnimationFrame(animationId);\n  }, [aspectRatio, showCropper]);\n\n  const handleMouseUp = () => {\n    // if (dragging) recordData({ x: position.x, y: position.y });\n    setDragging(false);\n    \n  };\n\n  const handleMouseDown = (e) => {\n    setDragging(true);\n    // Get initial mouse position and box position\n    setOffset({\n      x: e.clientX - position.x,\n      y: e.clientY - position.y,\n    });\n  };\n\n  const handleMouseMove = (e) => {\n    if (dragging) {\n      const container = videoRef.current.getBoundingClientRect();\n      const box = cropperRef.current.getBoundingClientRect();\n\n      let newX = e.clientX - offset.x;\n      let newY = e.clientY - offset.y;\n\n      // Keep the box within container bounds\n      if (newX < 0) newX = 0;\n      if (newY < 0) newY = 0;\n      if (newX + box.width > container.width) newX = container.width - box.width;\n      if (newY + box.height > container.height) newY = container.height - box.height;\n\n      setPosition({ x: newX, y: newY });\n      \n    }\n  };\n\n  const handleTimeUpdate = () => {\n    setCurrentTime(videoRef.current.currentTime);\n  };\n\n  const getCropperSize = (ratio) => {\n    const videoHeight = videoRef.current.offsetHeight;\n    console.log('videoRef.current', videoRef.current, videoRef.current.offsetHeight)\n    const newWidth = videoHeight * aspectRatios[ratio];\n\n    return { width: newWidth, height: videoHeight };\n  }\n\n  const handleAspectRatioChange = (newRatio) => {\n    setAspectRatio(newRatio);\n    // Update cropper size based on new aspect ratio\n    const { width, height } = getCropperSize(newRatio);\n    setCropperSize({ width, height });\n  };\n\n  const handleDownloadJSON = () => {\n    const dataStr = \"data:text/json;charset=utf-8,\" + encodeURIComponent(JSON.stringify(recordedData));\n    const downloadAnchorNode = document.createElement('a');\n    downloadAnchorNode.setAttribute(\"href\", dataStr);\n    downloadAnchorNode.setAttribute(\"download\", \"recorded_data.json\");\n    document.body.appendChild(downloadAnchorNode);\n    downloadAnchorNode.click();\n    downloadAnchorNode.remove();\n  };\n\n  const handleTabClick = (tab) => {\n    setActiveTab(tab);\n  };\n\n  const getVideoWidth = useCallback(() => {\n    let height = 460;\n\n    if (videoRef.current) {\n      height = videoRef.current.getBoundingClientRect().height;\n    } \n  \n    return `${height * aspectRatios[aspectRatio]}px`\n  }, [aspectRatio]);\n\n  const editorUi = () => (\n    <div className=\"editor-container\">\n      <div className=\"editor\">\n        <div className=\"video-container\"\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n          onMouseLeave={handleMouseUp}\n        >\n          <video\n            className=\"video\"\n            ref={videoRef}\n            src=\"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\"\n            onTimeUpdate={handleTimeUpdate}\n          />\n          {showCropper && <div\n            id=\"draggable\"\n            ref={cropperRef}\n            className=\"cropper\"\n            style={{\n              top: `${position.y}px`,\n              left: `${position.x}px`,\n              width: getVideoWidth(),\n              height: \"100%\",\n              aspectRatio: aspectRatio,\n            }}\n            onMouseDown={handleMouseDown}\n          >\n            <div class=\"grid-item\"></div>\n            <div class=\"grid-item\"></div>\n            <div class=\"grid-item\"></div>\n            <div class=\"grid-item\"></div>\n            <div class=\"grid-item\"></div>\n            <div class=\"grid-item\"></div>\n            <div class=\"grid-item\"></div>\n            <div class=\"grid-item\"></div>\n            <div class=\"grid-item\"></div>\n          </div>}\n        </div>\n        <Controls />\n      </div>\n      <Preview />\n    </div>\n  );\n\n  const startCropper = () => {\n    setShowCropper(true);\n    const { width, height } = getCropperSize(aspectRatio);\n    console.log(width, height);\n  };\n\n  const removeCropper = () => {\n    setShowCropper(false);\n  };\n\n  return (\n    <VideoFlipperContext.Provider value={{ \n      activeTab,\n      handleTabClick,\n      videoRef,\n      aspectRatio,\n      previewCanvasRef,\n      showCropper,\n      position,\n      handleTimeUpdate,\n      duration, \n      isPlaying, currentTime, setCurrentTime, playbackRate, setPlaybackRate, volume, setVolume, handleAspectRatioChange, handleDownloadJSON, setIsPlaying, handleMouseUp, handleMouseDown, handleMouseMove\n    }}>\n      <div className=\"cropper-container\">\n        <div className=\"cropper-top\">\n          <Header activeTab={activeTab} onTabClick={handleTabClick} />\n          {activeTab === 'editor' ? editorUi() : <RecordedPreview recordedData={recordedData} videoSrc={\"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\"} />}\n        </div>\n        {activeTab === 'editor' && <div className=\"cropper-bottom\">\n          <div className={`cropper-bottom-btn ${showCropper && 'cropper-bottom-btn-disabled'}`} type=\"button\" onClick={startCropper}>Start Cropper</div>\n          <div className={`cropper-bottom-btn ${!showCropper && 'cropper-bottom-btn-disabled'}`} type=\"button\" onClick={removeCropper}>Remove Cropper</div>\n          <div className=\"cropper-bottom-btn\" type=\"button\" onClick={handleDownloadJSON}>Generate Preview</div>\n        </div>}\n        \n      </div>\n    </VideoFlipperContext.Provider>\n  );\n};\n\nexport default VideoFlipper;\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAEhE,MAAO,oBAAoB,CAC3B,OAASC,YAAY,KAAQ,YAAY,CACzC,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAC/C,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,mBAAmB,KAAM,WAAW,CAC3C,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,QAAQ,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGb,QAAQ,CAAC,QAAQ,CAAC,CACpD,KAAM,CAACc,SAAS,CAAEC,YAAY,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACgB,YAAY,CAAEC,eAAe,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CACnD,KAAM,CAACkB,MAAM,CAAEC,SAAS,CAAC,CAAGnB,QAAQ,CAAC,CAAC,CAAC,CACvC,KAAM,CAACoB,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAACsB,WAAW,CAAEC,cAAc,CAAC,CAAGvB,QAAQ,CAAC,MAAM,CAAC,CACtD,KAAM,CAACwB,WAAW,CAAEC,cAAc,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAC0B,YAAY,CAAEC,eAAe,CAAC,CAAG3B,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAC4B,QAAQ,CAAEC,WAAW,CAAC,CAAG7B,QAAQ,CAAC,CAAC,CAAC,CAC3C,KAAM,CAAC8B,WAAW,CAAEC,cAAc,CAAC,CAAG/B,QAAQ,CAAC,CAAEgC,KAAK,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAE,CAAC,CAAC,CACvE,KAAM,CAAAC,UAAU,CAAGnC,MAAM,CAAC,IAAI,CAAC,CAC/B,KAAM,CAAAoC,QAAQ,CAAGpC,MAAM,CAAC,IAAI,CAAC,CAC7B,KAAM,CAAAqC,gBAAgB,CAAGrC,MAAM,CAAC,IAAI,CAAC,CAErCsC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEZ,YAAY,CAAC,CACzC,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAAGxC,QAAQ,CAAC,CAAEyC,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAC,CAAC,CACxD,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAG5C,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAC6C,MAAM,CAAEC,SAAS,CAAC,CAAG9C,QAAQ,CAAC,CAAEyC,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAC,CAAC,CAEpD5C,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiD,KAAK,CAAGZ,QAAQ,CAACa,OAAO,CAC9B,GAAID,KAAK,CAAE,CACTA,KAAK,CAACE,gBAAgB,CAAC,gBAAgB,CAAEC,oBAAoB,CAAC,CAE9D,MAAO,IAAM,CACXH,KAAK,CAACI,mBAAmB,CAAC,gBAAgB,CAAED,oBAAoB,CAAC,CACnE,CAAC,CACH,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,oBAAoB,CAAGA,CAAA,GAAM,CACjCrB,WAAW,CAACM,QAAQ,CAACa,OAAO,CAACpB,QAAQ,CAAC,CACxC,CAAC,CAED9B,SAAS,CAAC,IAAM,CACd,GAAIqC,QAAQ,CAACa,OAAO,CAAE,CACpBb,QAAQ,CAACa,OAAO,CAAChC,YAAY,CAAGA,YAAY,CAC5CmB,QAAQ,CAACa,OAAO,CAAC9B,MAAM,CAAGA,MAAM,CAClC,CACF,CAAC,CAAE,CAACF,YAAY,CAAEmB,QAAQ,CAAEjB,MAAM,CAAC,CAAC,CAEpCpB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsD,UAAU,CAAGA,CACjB;AAAA,GACG,CACH,KAAM,CAAAC,QAAQ,CAAG,CAAC,GAAG3B,YAAY,CAAC,CAClC,KAAM,CAAA4B,MAAM,CAAGD,QAAQ,CAACE,EAAE,CAAC,CAAC,CAAC,CAAC,CAE9BlB,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEgB,MAAM,CAAC,CAC7B,KAAM,CAACtB,KAAK,CAAEC,MAAM,CAAC,CAAGuB,cAAc,CAAClC,WAAW,CAAC,CACnDe,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEN,KAAK,CAAEC,MAAM,CAAC,CAC3C,KAAM,CAAAwB,OAAO,CAAG,CACdC,SAAS,CAAEtC,WAAW,CACtBuC,WAAW,CAAE,CACXpB,QAAQ,CAACE,CAAC,CACVF,QAAQ,CAACG,CAAC,CACVV,KAAK,CACLC,MAAM,CACP,CACDf,MAAM,CACNF,YACF,CAAC,CAED,GAAIsC,MAAM,EAAIA,MAAM,CAACI,SAAS,GAAKtC,WAAW,CAAE,CAC9CiC,QAAQ,CAACO,GAAG,CAAC,CAAC,CAChB,CAEAjC,eAAe,CAAC,CAAC,GAAG0B,QAAQ,CAAEI,OAAO,CAAC,CAAC,CACzC,CAAC,CAED,GAAItB,QAAQ,CAACa,OAAO,CAAE,CACpBI,UAAU,CAAC,CAAC,CACd,CAAC,CACH,CAAC,CAAE,CAAClC,MAAM,CAAEF,YAAY,CAAEM,WAAW,CAAEiB,QAAQ,CAACE,CAAC,CAAEF,QAAQ,CAACG,CAAC,CAAEZ,WAAW,CAACE,KAAK,CAAEF,WAAW,CAACG,MAAM,CAAC,CAAC,CAEtGnC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA+D,aAAa,CAAGA,CAAA,GAAM,CAE1B,GAAIrC,WAAW,EAAIW,QAAQ,CAACa,OAAO,EAAId,UAAU,CAACc,OAAO,EAAIZ,gBAAgB,CAACY,OAAO,CAAE,CACrF,KAAM,CAAAD,KAAK,CAAGZ,QAAQ,CAACa,OAAO,CAC9B,KAAM,CAAAc,OAAO,CAAG5B,UAAU,CAACc,OAAO,CAClC,KAAM,CAAAe,MAAM,CAAG3B,gBAAgB,CAACY,OAAO,CACvC,KAAM,CAAAgB,GAAG,CAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC,CAEnC,KAAM,CAAAC,WAAW,CAAGJ,OAAO,CAACK,qBAAqB,CAAC,CAAC,CACnD,KAAM,CAAAC,SAAS,CAAGrB,KAAK,CAACoB,qBAAqB,CAAC,CAAC,CAE/C,KAAM,CAAAE,MAAM,CAAGtB,KAAK,CAACuB,UAAU,CAAGF,SAAS,CAACpC,KAAK,CACjD,KAAM,CAAAuC,MAAM,CAAGxB,KAAK,CAACyB,WAAW,CAAGJ,SAAS,CAACnC,MAAM,CAEnD,KAAM,CAAAwC,OAAO,CAAG,CAACP,WAAW,CAACQ,IAAI,CAAGN,SAAS,CAACM,IAAI,EAAIL,MAAM,CAC5D,KAAM,CAAAM,OAAO,CAAG,CAACT,WAAW,CAACU,GAAG,CAAGR,SAAS,CAACQ,GAAG,EAAIL,MAAM,CAC1D,KAAM,CAAAM,WAAW,CAAGX,WAAW,CAAClC,KAAK,CAAGqC,MAAM,CAC9C,KAAM,CAAAS,YAAY,CAAGZ,WAAW,CAACjC,MAAM,CAAGsC,MAAM,CAEhDR,MAAM,CAAC/B,KAAK,CAAGkC,WAAW,CAAClC,KAAK,CAChC+B,MAAM,CAAC9B,MAAM,CAAGiC,WAAW,CAACjC,MAAM,CAElC+B,GAAG,CAACe,SAAS,CACXhC,KAAK,CACL0B,OAAO,CAAEE,OAAO,CAAEE,WAAW,CAAEC,YAAY,CAC3C,CAAC,CAAE,CAAC,CAAEf,MAAM,CAAC/B,KAAK,CAAE+B,MAAM,CAAC9B,MAC7B,CAAC,CACH,CACF,CAAC,CAED,KAAM,CAAA+C,WAAW,CAAGC,qBAAqB,CAAC,QAAS,CAAAC,OAAOA,CAAA,CAAG,CAC3DrB,aAAa,CAAC,CAAC,CACfoB,qBAAqB,CAACC,OAAO,CAAC,CAChC,CAAC,CAAC,CAEF,MAAO,IAAMC,oBAAoB,CAACH,WAAW,CAAC,CAChD,CAAC,CAAE,CAAC1D,WAAW,CAAEE,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAA4D,aAAa,CAAGA,CAAA,GAAM,CAC1B;AACAxC,WAAW,CAAC,KAAK,CAAC,CAEpB,CAAC,CAED,KAAM,CAAAyC,eAAe,CAAIC,CAAC,EAAK,CAC7B1C,WAAW,CAAC,IAAI,CAAC,CACjB;AACAE,SAAS,CAAC,CACRL,CAAC,CAAE6C,CAAC,CAACC,OAAO,CAAGhD,QAAQ,CAACE,CAAC,CACzBC,CAAC,CAAE4C,CAAC,CAACE,OAAO,CAAGjD,QAAQ,CAACG,CAC1B,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAA+C,eAAe,CAAIH,CAAC,EAAK,CAC7B,GAAI3C,QAAQ,CAAE,CACZ,KAAM,CAAA+C,SAAS,CAAGvD,QAAQ,CAACa,OAAO,CAACmB,qBAAqB,CAAC,CAAC,CAC1D,KAAM,CAAAwB,GAAG,CAAGzD,UAAU,CAACc,OAAO,CAACmB,qBAAqB,CAAC,CAAC,CAEtD,GAAI,CAAAyB,IAAI,CAAGN,CAAC,CAACC,OAAO,CAAG1C,MAAM,CAACJ,CAAC,CAC/B,GAAI,CAAAoD,IAAI,CAAGP,CAAC,CAACE,OAAO,CAAG3C,MAAM,CAACH,CAAC,CAE/B;AACA,GAAIkD,IAAI,CAAG,CAAC,CAAEA,IAAI,CAAG,CAAC,CACtB,GAAIC,IAAI,CAAG,CAAC,CAAEA,IAAI,CAAG,CAAC,CACtB,GAAID,IAAI,CAAGD,GAAG,CAAC3D,KAAK,CAAG0D,SAAS,CAAC1D,KAAK,CAAE4D,IAAI,CAAGF,SAAS,CAAC1D,KAAK,CAAG2D,GAAG,CAAC3D,KAAK,CAC1E,GAAI6D,IAAI,CAAGF,GAAG,CAAC1D,MAAM,CAAGyD,SAAS,CAACzD,MAAM,CAAE4D,IAAI,CAAGH,SAAS,CAACzD,MAAM,CAAG0D,GAAG,CAAC1D,MAAM,CAE9EO,WAAW,CAAC,CAAEC,CAAC,CAAEmD,IAAI,CAAElD,CAAC,CAAEmD,IAAK,CAAC,CAAC,CAEnC,CACF,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7BzE,cAAc,CAACc,QAAQ,CAACa,OAAO,CAAC5B,WAAW,CAAC,CAC9C,CAAC,CAED,KAAM,CAAAoC,cAAc,CAAIuC,KAAK,EAAK,CAChC,KAAM,CAAAvB,WAAW,CAAGrC,QAAQ,CAACa,OAAO,CAACgD,YAAY,CACjD3D,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEH,QAAQ,CAACa,OAAO,CAAEb,QAAQ,CAACa,OAAO,CAACgD,YAAY,CAAC,CAChF,KAAM,CAAAC,QAAQ,CAAGzB,WAAW,CAAGvE,YAAY,CAAC8F,KAAK,CAAC,CAElD,MAAO,CAAE/D,KAAK,CAAEiE,QAAQ,CAAEhE,MAAM,CAAEuC,WAAY,CAAC,CACjD,CAAC,CAED,KAAM,CAAA0B,uBAAuB,CAAIC,QAAQ,EAAK,CAC5C5E,cAAc,CAAC4E,QAAQ,CAAC,CACxB;AACA,KAAM,CAAEnE,KAAK,CAAEC,MAAO,CAAC,CAAGuB,cAAc,CAAC2C,QAAQ,CAAC,CAClDpE,cAAc,CAAC,CAAEC,KAAK,CAAEC,MAAO,CAAC,CAAC,CACnC,CAAC,CAED,KAAM,CAAAmE,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAAAC,OAAO,CAAG,+BAA+B,CAAGC,kBAAkB,CAACC,IAAI,CAACC,SAAS,CAAC9E,YAAY,CAAC,CAAC,CAClG,KAAM,CAAA+E,kBAAkB,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACtDF,kBAAkB,CAACG,YAAY,CAAC,MAAM,CAAEP,OAAO,CAAC,CAChDI,kBAAkB,CAACG,YAAY,CAAC,UAAU,CAAE,oBAAoB,CAAC,CACjEF,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,kBAAkB,CAAC,CAC7CA,kBAAkB,CAACM,KAAK,CAAC,CAAC,CAC1BN,kBAAkB,CAACO,MAAM,CAAC,CAAC,CAC7B,CAAC,CAED,KAAM,CAAAC,cAAc,CAAIC,GAAG,EAAK,CAC9BrG,YAAY,CAACqG,GAAG,CAAC,CACnB,CAAC,CAED,KAAM,CAAAC,aAAa,CAAGtH,WAAW,CAAC,IAAM,CACtC,GAAI,CAAAoC,MAAM,CAAG,GAAG,CAEhB,GAAIE,QAAQ,CAACa,OAAO,CAAE,CACpBf,MAAM,CAAGE,QAAQ,CAACa,OAAO,CAACmB,qBAAqB,CAAC,CAAC,CAAClC,MAAM,CAC1D,CAEA,MAAO,GAAGA,MAAM,CAAGhC,YAAY,CAACqB,WAAW,CAAC,IAAI,CAClD,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAEjB,KAAM,CAAA8F,QAAQ,CAAGA,CAAA,gBACf1G,KAAA,QAAK2G,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B5G,KAAA,QAAK2G,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrB5G,KAAA,QAAK2G,SAAS,CAAC,iBAAiB,CAC9BE,WAAW,CAAE9B,eAAgB,CAC7B+B,SAAS,CAAEpC,aAAc,CACzBqC,YAAY,CAAErC,aAAc,CAAAkC,QAAA,eAE5B9G,IAAA,UACE6G,SAAS,CAAC,OAAO,CACjBK,GAAG,CAAEvF,QAAS,CACdwF,GAAG,CAAC,mFAAmF,CACvFC,YAAY,CAAE9B,gBAAiB,CAChC,CAAC,CACDtE,WAAW,eAAId,KAAA,QACdmH,EAAE,CAAC,WAAW,CACdH,GAAG,CAAExF,UAAW,CAChBmF,SAAS,CAAC,SAAS,CACnBS,KAAK,CAAE,CACLlD,GAAG,CAAE,GAAGrC,QAAQ,CAACG,CAAC,IAAI,CACtBgC,IAAI,CAAE,GAAGnC,QAAQ,CAACE,CAAC,IAAI,CACvBT,KAAK,CAAEmF,aAAa,CAAC,CAAC,CACtBlF,MAAM,CAAE,MAAM,CACdX,WAAW,CAAEA,WACf,CAAE,CACFyG,WAAW,CAAE1C,eAAgB,CAAAiC,QAAA,eAE7B9G,IAAA,QAAKwH,KAAK,CAAC,WAAW,CAAM,CAAC,cAC7BxH,IAAA,QAAKwH,KAAK,CAAC,WAAW,CAAM,CAAC,cAC7BxH,IAAA,QAAKwH,KAAK,CAAC,WAAW,CAAM,CAAC,cAC7BxH,IAAA,QAAKwH,KAAK,CAAC,WAAW,CAAM,CAAC,cAC7BxH,IAAA,QAAKwH,KAAK,CAAC,WAAW,CAAM,CAAC,cAC7BxH,IAAA,QAAKwH,KAAK,CAAC,WAAW,CAAM,CAAC,cAC7BxH,IAAA,QAAKwH,KAAK,CAAC,WAAW,CAAM,CAAC,cAC7BxH,IAAA,QAAKwH,KAAK,CAAC,WAAW,CAAM,CAAC,cAC7BxH,IAAA,QAAKwH,KAAK,CAAC,WAAW,CAAM,CAAC,EAC1B,CAAC,EACH,CAAC,cACNxH,IAAA,CAACF,QAAQ,GAAE,CAAC,EACT,CAAC,cACNE,IAAA,CAACH,OAAO,GAAE,CAAC,EACR,CACN,CAED,KAAM,CAAA4H,YAAY,CAAGA,CAAA,GAAM,CACzBxG,cAAc,CAAC,IAAI,CAAC,CACpB,KAAM,CAAEO,KAAK,CAAEC,MAAO,CAAC,CAAGuB,cAAc,CAAClC,WAAW,CAAC,CACrDe,OAAO,CAACC,GAAG,CAACN,KAAK,CAAEC,MAAM,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAiG,aAAa,CAAGA,CAAA,GAAM,CAC1BzG,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAED,mBACEjB,IAAA,CAACJ,mBAAmB,CAAC+H,QAAQ,EAACC,KAAK,CAAE,CACnCxH,SAAS,CACTqG,cAAc,CACd9E,QAAQ,CACRb,WAAW,CACXc,gBAAgB,CAChBZ,WAAW,CACXe,QAAQ,CACRuD,gBAAgB,CAChBlE,QAAQ,CACRd,SAAS,CAAEM,WAAW,CAAEC,cAAc,CAAEL,YAAY,CAAEC,eAAe,CAAEC,MAAM,CAAEC,SAAS,CAAE+E,uBAAuB,CAAEE,kBAAkB,CAAErF,YAAY,CAAEqE,aAAa,CAAEC,eAAe,CAAEI,eACvL,CAAE,CAAA6B,QAAA,cACA5G,KAAA,QAAK2G,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC5G,KAAA,QAAK2G,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B9G,IAAA,CAACL,MAAM,EAACS,SAAS,CAAEA,SAAU,CAACyH,UAAU,CAAEpB,cAAe,CAAE,CAAC,CAC3DrG,SAAS,GAAK,QAAQ,CAAGwG,QAAQ,CAAC,CAAC,cAAG5G,IAAA,CAACN,eAAe,EAACwB,YAAY,CAAEA,YAAa,CAAC4G,QAAQ,CAAE,mFAAoF,CAAE,CAAC,EAClL,CAAC,CACL1H,SAAS,GAAK,QAAQ,eAAIF,KAAA,QAAK2G,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eACxD9G,IAAA,QAAK6G,SAAS,CAAE,sBAAsB7F,WAAW,EAAI,6BAA6B,EAAG,CAAC+G,IAAI,CAAC,QAAQ,CAACC,OAAO,CAAEP,YAAa,CAAAX,QAAA,CAAC,eAAa,CAAK,CAAC,cAC9I9G,IAAA,QAAK6G,SAAS,CAAE,sBAAsB,CAAC7F,WAAW,EAAI,6BAA6B,EAAG,CAAC+G,IAAI,CAAC,QAAQ,CAACC,OAAO,CAAEN,aAAc,CAAAZ,QAAA,CAAC,gBAAc,CAAK,CAAC,cACjJ9G,IAAA,QAAK6G,SAAS,CAAC,oBAAoB,CAACkB,IAAI,CAAC,QAAQ,CAACC,OAAO,CAAEpC,kBAAmB,CAAAkB,QAAA,CAAC,kBAAgB,CAAK,CAAC,EAClG,CAAC,EAEH,CAAC,CACsB,CAAC,CAEnC,CAAC,CAED,cAAe,CAAA3G,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}